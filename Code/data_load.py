import scipy.io as sio
import numpy as np
import pickle
import glob
import matplotlib.pyplot as plt
from scipy.signal import butter, filtfilt

#Labels
labels1 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1]

labels2 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
        2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

labels3 = [1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
        2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,1,1,2,2,2,2,2,2,2,2,2,2,2]

labels4 = [2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,
        2,2,2,2,2,2,2,2,2,2,2,2]

labels5 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,
        2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,
        2,2,2,2,2,2,2,2,2,2,2]

labels6 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,
            1,1,1,2,2,2,2,2,2,2,2,2,2,2]

labels7 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

labels8 = [1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
        2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
        1,1,1,1,1,1,1,1,1,1,1]
labels9 = [2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1]
labels10 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1]

labels11 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

labels12 = [2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]

labels13 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1]

labels14 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1]

labels15 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

labels16 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            2,2,2,2,2,2,2]
labels17 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]

labels18 = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
            2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]

dir_path = r'C:\Users\Jakob\Desktop\AAU\7Semester\Projekt\P7_projekt\DATA\DTU\dtupkl\train/'
dir_path2 = r'C:\Users\Jakob\Desktop\AAU\7Semester\Projekt\P7_projekt\DATA\DTU\dtupkl\val/'
dir_path3 = r'C:\Users\Jakob\Desktop\AAU\7Semester\Projekt\P7_projekt\DATA\DTU\dtupkl\tst/'

labels_list = [labels1, labels2, labels3, labels4, labels5, labels6, labels7, labels8, labels9, labels10, labels11, labels12, labels13, labels14, labels15, labels16, labels17, labels18]
path2 = f'C:/Users/Jakob/Desktop/AAU/7Semester/Projekt/P7_projekt/DATA/DTU/'

for j, label in enumerate(labels_list):
    filename = f'S{j+1}_data_preproc.mat'
    data_dtu = sio.loadmat(path2 + filename)
    for i in range(len(data_dtu['data'][0][0][3][0])):
        label_cur = label
        eeg_trn = data_dtu['data'][0][0][3][0][i][:2240, :-2]
        eeg_trn = eeg_trn.T
        eeg_trn = [eeg_trn, label_cur[i]]
        eeg_val = data_dtu['data'][0][0][3][0][i][2240:2880, :-2]
        eeg_val = eeg_val.T
        eeg_val = [eeg_val, label_cur[i]]
        eeg_tst = data_dtu['data'][0][0][3][0][i][2880:, :-2]
        eeg_tst = eeg_tst.T
        eeg_tst = [eeg_tst, label_cur[i]]
        str_i = str(i)
        str_j = str(j+1)
        with open(dir_path + str_j + '/' + 'trialnr' + str_i + 'dtutrain.pkl', 'wb') as f:
            pickle.dump(eeg_trn, f)
        with open(dir_path2 +  str_j + '/' + 'trialnr' + str_i + 'dtuval.pkl', 'wb') as f:
            pickle.dump(eeg_val, f)
        with open(dir_path3 + str_j + '/' + 'trialnr' + str_i + 'dtutst.pkl', 'wb') as f:
            pickle.dump(eeg_tst, f)


